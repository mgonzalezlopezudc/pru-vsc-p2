{% extends "base.html" %}

{% block title %}{{ t('store.title', name=store.name) }}{% endblock %}

{% block content %}
<section class="card hero-media">
  <div class="hero-image-wrap">
    <img class="hero-image" src="{{ store.image }}" alt="{{ store.name }}" loading="lazy" data-fallback="{{ url_for('static', filename='images/store-placeholder.svg') }}" onerror="this.onerror=null;this.src=this.dataset.fallback;">
  </div>
  <div>
    <p class="eyebrow">{{ t('store.eyebrow') }}</p>
    <h2>{{ store.name }}</h2>
    <p>{{ store.address }}</p>
  </div>
</section>

<section class="card">
  <h3>{{ t('store.location') }}</h3>
  <div id="store-map" class="map" data-geojson='{{ store.location|tojson }}'></div>
</section>

<section class="card">
  <h3>{{ t('store.shelves') }}</h3>
  <table>
    <thead>
      <tr>
        <th>{{ t('table.name') }}</th>
        <th>{{ t('table.current_load') }}</th>
        <th>{{ t('table.max_capacity') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for shelf in shelves %}
      <tr>
        <td>{{ shelf.name }}</td>
        <td>{{ shelf.currentLoad }}</td>
        <td>{{ shelf.maxCapacity }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<section class="card">
  <h3>{{ t('store.inventory') }}</h3>
  <table>
    <thead>
      <tr>
        <th>{{ t('table.product') }}</th>
        <th>{{ t('table.shelf') }}</th>
        <th>{{ t('table.stock_total') }}</th>
        <th>{{ t('table.on_shelf') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for row in inventory %}
      <tr>
        <td>
          <a href="{{ url_for('main.product_detail', product_id=row.productId) }}">{{ row.productName }}</a>
          <div class="meta">{{ row.productSize }} Â· {{ row.productPrice|currency }}</div>
        </td>
        <td>{{ row.shelfName }}</td>
        <td>{{ row.stockCount }}</td>
        <td>{{ row.shelfCount }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
